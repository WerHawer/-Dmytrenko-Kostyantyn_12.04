{"version":3,"sources":["webpack:///./markup/filmList.hbs","webpack:///./markup/selectOptions.hbs","webpack:///./markup/favorites.hbs","webpack:///./utils/api.js","webpack:///./refs.js","webpack:///./data/films.js","webpack:///./utils/localStorage.js","webpack:///./favorites.js","webpack:///./oneFilm.js","webpack:///./movieList.js","webpack:///./viewOption.js","webpack:///./markup/oneFilm.hbs"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","stack1","alias1","lambda","alias2","escapeExpression","alias3","nullContext","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","program","noop","BASE_URL","loadFilms","axios","get","this","filmsResponse","alert","loadOneFilm","id","filmResponse","main","document","querySelector","filmList","favorites","oneFilmModal","body","preloader","select","viewContainer","viewBlock","viewList","favToggle","allFilms","key","serializedState","localStorage","getItem","undefined","JSON","parse","err","console","error","value","stringify","setItem","refs","addEventListener","e","target","dataset","action","oneFilm","renderChoosenFilm","deleteFromFavorite","classList","toggle","favoritesLS","renderFavorites","markup","favoritesMarcup","filmsData","innerHTML","insertAdjacentHTML","element","createMarkup","moviesApi","oneFilmResponse","find","inFavorite","oneFilmMarkup","render","el","currentTarget","film","closest","window","scrollTo","remove","add","addEventListenersForOneFilm","button","favoriteBtn","closeOnButton","bind","closeOnEsc","toggleFavorite","close","removeEventListener","scrollIntoView","block","stopPropagation","code","tagName","control","checked","addToFavorite","filmToFavorite","String","renderFilmList","filter","loadedFilms","genres","reduce","all","map","genre","toLowerCase","unique","item","includes","selectOptionsMarkup","createSelectOptions","initFavoritesFromLS","films","filmLS","createFilmData","filmListMarkup","list","helper","hooks","helperMissing","alias4","alias5"],"mappings":"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","file":"main.f756ada3b2a89c96f4f9.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, alias3=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"        <li id=\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"id\") : depth0), depth0))\n    + \" class=\\\"movie-list__element\\\">\\r\\n\\r\\n            <div class=\\\"img-container\\\">\\r\\n\\r\\n            <img src=\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"img\") : depth0), depth0))\n    + \" alt=\\\"movie poster\\\" class=\\\"movie-list__element-img\\\">\\r\\n            </div>\\r\\n           \\r\\n\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias3,(depth0 != null ? lookupProperty(depth0,\"inFavorite\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.program(4, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":8},\"end\":{\"line\":16,\"column\":15}}})) != null ? stack1 : \"\")\n    + \"\\r\\n            <label for='check\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"id\") : depth0), depth0))\n    + \"' class=\\\"movie-list__element-favorite\\\" data-action=\\\"favorite\\\"></label>\\r\\n\\r\\n            <div class=\\\"movie-list__element-info\\\">\\r\\n\\r\\n          \\r\\n                <h2 class=\\\"movie-list__element-name\\\">\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"name\") : depth0), depth0))\n    + \"</h2>\\r\\n                <p class=\\\"movie-list__element-year\\\">\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"year\") : depth0), depth0))\n    + \"</p>\\r\\n\\r\\n                  <div class=\\\"movie-list__element-description\\\">\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"description\") : depth0), depth0))\n    + \"</div>\\r\\n\\r\\n                <div class=\\\"movie-list__element-genre\\\">\\r\\n                    <ul class=\\\"genre-list\\\">\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias3,(depth0 != null ? lookupProperty(depth0,\"genres\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(6, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":30,\"column\":24},\"end\":{\"line\":32,\"column\":33}}})) != null ? stack1 : \"\")\n    + \"                    </ul>\\r\\n                </div>\\r\\n\\r\\n              </div>\\r\\n        \\r\\n        </li>\\r\\n\";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"            <input type=\\\"checkbox\\\" name=\\\"favoriteInput\\\"  id='check\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"id\") : depth0), depth0))\n    + \"' class=\\\"movie-list__element--checkbox\\\" data-action=\\\"favorite\\\" checked/>\\r\\n\";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"            <input type=\\\"checkbox\\\" name=\\\"favoriteInput\\\" id='check\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"id\") : depth0), depth0))\n    + \"' class=\\\"movie-list__element--checkbox\\\" data-action=\\\"favorite\\\" />\\r\\n\";\n},\"6\":function(container,depth0,helpers,partials,data) {\n    return \"                        <li class=\\\"genre-elemetn\\\">\"\n    + container.escapeExpression(container.lambda(depth0, depth0))\n    + \"</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\r\\n    <ul class=\\\"js-movie-list movie-list\\\">\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"allFilms\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":8},\"end\":{\"line\":39,\"column\":17}}})) != null ? stack1 : \"\")\n    + \"    </ul>\\r\\n\";\n},\"useData\":true});","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.lambda, alias2=container.escapeExpression;\n\n  return \"<option value=\"\n    + alias2(alias1(depth0, depth0))\n    + \">\"\n    + alias2(alias1(depth0, depth0))\n    + \"</option>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"genres\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":0},\"end\":{\"line\":4,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"favorites\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":12},\"end\":{\"line\":10,\"column\":21}}})) != null ? stack1 : \"\");\n},\"2\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"            <li id=\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"id\") : depth0), depth0))\n    + \" class=\\\"favorites-list__element\\\">\\r\\n                <p class=\\\"favorites-list__element--name\\\">\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"name\") : depth0), depth0))\n    + \"</p>\\r\\n                <button data-action=\\\"delete\\\" class=\\\"deleteBtn\\\"></button>\\r\\n            </li>\\r\\n\";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    return \"            <li class=\\\"favorites__noMovie\\\">You don`t have any favorites movie</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\r\\n    <h2 class=\\\"favorites-h2\\\">Favorites</h2>\\r\\n    <ul class=\\\"favorites-list\\\">\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? lookupProperty(depth0,\"favorites\") : depth0)) != null ? lookupProperty(stack1,\"length\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(4, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":8},\"end\":{\"line\":13,\"column\":15}}})) != null ? stack1 : \"\")\n    + \"    </ul>\\r\\n\";\n},\"useData\":true});","import axios from 'axios';\r\n\r\nexport default {\r\n  BASE_URL: 'http://my-json-server.typicode.com/moviedb-tech/movies/list',\r\n\r\n  async loadFilms() {\r\n    try {\r\n      const filmsResponse = await axios.get(this.BASE_URL);\r\n      return filmsResponse.data;\r\n    } catch (error) {\r\n      alert(error);\r\n    }\r\n  },\r\n\r\n  async loadOneFilm(id) {\r\n    try {\r\n      const filmResponse = await axios.get(`${this.BASE_URL}/${id}`);\r\n      return filmResponse.data;\r\n    } catch (error) {\r\n      alert(error);\r\n    }\r\n  },\r\n};\r\n","export default {\r\n  main: document.querySelector('#main'),\r\n  filmList: document.querySelector('.film-list'),\r\n  favorites: document.querySelector('.favorites'),\r\n  oneFilmModal: document.querySelector('.oneFilm'),\r\n  body: document.body,\r\n  preloader: document.querySelector('.preloader'),\r\n  select: document.querySelector('#genreSelect'),\r\n  viewContainer: document.querySelector('.view-container'),\r\n  viewBlock: document.querySelector('.js-viewBlock'),\r\n  viewList: document.querySelector('.js-viewList'),\r\n  favToggle: document.querySelector('.favorites__toggle'),\r\n};\r\n","export default {\r\n  allFilms: [],\r\n  favorites: [],\r\n};\r\n","export default {\r\n  load(key) {\r\n    try {\r\n      const serializedState = localStorage.getItem(key);\r\n\r\n      return serializedState === null ? undefined : JSON.parse(serializedState);\r\n    } catch (err) {\r\n      console.error('Get state error: ', err);\r\n    }\r\n  },\r\n\r\n  // Принимает ключ `key` и значение `value`.\r\n  save(key, value) {\r\n    try {\r\n      const serializedState = JSON.stringify(value);\r\n      localStorage.setItem(key, serializedState);\r\n    } catch (err) {\r\n      console.error('Set state error: ', err);\r\n    }\r\n  },\r\n};\r\n","import filmsData from './data/films';\r\nimport refs from './refs';\r\nimport favoritesMarcup from './markup/favorites.hbs';\r\nimport localStorage from './utils/localStorage';\r\nimport oneFilm from './oneFilm';\r\n\r\nconst deleteMovie = e => {\r\n  if (e.target.dataset.action !== 'delete') return;\r\n  oneFilm.deleteFromFavorite(e);\r\n};\r\n\r\nconst renderFilm = e => {\r\n  if (e.target.dataset.action === 'delete') return;\r\n  oneFilm.renderChoosenFilm(e);\r\n};\r\n\r\nconst toggleShowFavorites = () => {\r\n  refs.favorites.classList.toggle('favorites--show');\r\n  refs.favToggle.classList.toggle('favorites__toggle--show');\r\n};\r\n\r\nrefs.favorites.addEventListener('click', renderFilm);\r\nrefs.favorites.addEventListener('click', deleteMovie);\r\nrefs.favToggle.addEventListener('click', toggleShowFavorites);\r\n\r\nconst renderFavorites = () => {\r\n  const markup = favoritesMarcup(filmsData);\r\n  refs.favorites.innerHTML = '';\r\n  refs.favorites.insertAdjacentHTML('beforeend', markup);\r\n};\r\n\r\n(() => {\r\n  const favoritesLS = localStorage.load('favorites');\r\n  if (favoritesLS) {\r\n    filmsData.favorites = favoritesLS;\r\n  }\r\n  renderFavorites();\r\n})();\r\n\r\nexport default renderFavorites;\r\n","import oneFilmMarkup from './markup/oneFilm.hbs';\r\nimport moviesApi from './utils/api';\r\nimport refs from './refs';\r\nimport filmsData from './data/films';\r\nimport localStorage from './utils/localStorage';\r\nimport renderFavorites from './favorites';\r\nimport renderFilmList from './movieList';\r\n\r\nexport default {\r\n  element: '',\r\n\r\n  async createMarkup(id) {\r\n    const oneFilmResponse = await moviesApi.loadOneFilm(id);\r\n\r\n    const filmInFavorits = filmsData.favorites.find(\r\n      ({ id }) => id === oneFilmResponse.id,\r\n    );\r\n\r\n    if (filmInFavorits) {\r\n      oneFilmResponse.inFavorite = true;\r\n    }\r\n\r\n    const markup = oneFilmMarkup(oneFilmResponse);\r\n\r\n    return markup;\r\n  },\r\n\r\n  async render(el, id) {\r\n    const markup = await this.createMarkup(id);\r\n    el.innerHTML = '';\r\n    el.insertAdjacentHTML('beforeend', markup);\r\n  },\r\n\r\n  async renderChoosenFilm(e) {\r\n    if (e.target === e.currentTarget) return;\r\n    const film = e.target.closest('li');\r\n\r\n    if (film) {\r\n      window.scrollTo(0, 0);\r\n\r\n      refs.preloader.classList.remove('preloader--none');\r\n      refs.body.classList.add('hideOverflow');\r\n\r\n      this.element = film;\r\n\r\n      await this.render(refs.oneFilmModal, film.id);\r\n\r\n      refs.oneFilmModal.classList.remove('oneFilm--none');\r\n      refs.preloader.classList.add('preloader--none');\r\n\r\n      this.addEventListenersForOneFilm();\r\n    }\r\n  },\r\n\r\n  addEventListenersForOneFilm() {\r\n    const button = document.querySelector('.closeBtn');\r\n    const favoriteBtn = document.querySelector('.oneFilm__checkbox--label');\r\n    button.addEventListener('click', this.closeOnButton.bind(this));\r\n    window.addEventListener('keydown', this.closeOnEsc.bind(this));\r\n    favoriteBtn.addEventListener('click', this.toggleFavorite.bind(this));\r\n  },\r\n\r\n  close() {\r\n    refs.oneFilmModal.classList.add('oneFilm--none');\r\n    refs.body.classList.remove('hideOverflow');\r\n    window.removeEventListener('keydown', this.closeOnEsc);\r\n\r\n    // window.scrollTo(this.coords.x, this.coords.y);\r\n\r\n    this.element.scrollIntoView({\r\n      block: 'center',\r\n    });\r\n  },\r\n\r\n  closeOnButton(e) {\r\n    e.stopPropagation();\r\n    this.close();\r\n  },\r\n\r\n  closeOnEsc(e) {\r\n    if (e.code !== 'Escape') return;\r\n    this.close();\r\n  },\r\n\r\n  toggleFavorite(e) {\r\n    if (e.target.dataset.action === 'favorite') {\r\n      e.stopPropagation();\r\n    }\r\n\r\n    if (e.target.tagName !== 'LABEL') return;\r\n\r\n    if (e.target.control.checked) {\r\n      this.deleteFromFavorite(e);\r\n      return;\r\n    }\r\n\r\n    this.addToFavorite(e);\r\n  },\r\n\r\n  addToFavorite(e) {\r\n    const film = e.target.closest('li') || e.target.closest('div');\r\n\r\n    const filmToFavorite = filmsData.allFilms.find(\r\n      ({ id }) => String(id) === film.id,\r\n    );\r\n\r\n    filmsData.favorites = [...filmsData.favorites, filmToFavorite];\r\n\r\n    localStorage.save('favorites', filmsData.favorites);\r\n\r\n    renderFavorites();\r\n    renderFilmList();\r\n  },\r\n\r\n  deleteFromFavorite(e) {\r\n    const film = e.target.closest('li') || e.target.closest('div');\r\n\r\n    filmsData.favorites = filmsData.favorites.filter(\r\n      ({ id }) => String(id) !== film.id,\r\n    );\r\n\r\n    localStorage.save('favorites', filmsData.favorites);\r\n\r\n    renderFavorites();\r\n    renderFilmList();\r\n  },\r\n};\r\n","import moviesApi from './utils/api';\r\nimport filmListMarkup from './markup/filmList.hbs';\r\nimport refs from './refs';\r\nimport oneFilm from './oneFilm';\r\nimport filmsData from './data/films';\r\nimport localStorage from './utils/localStorage';\r\nimport selectOptionsMarkup from './markup/selectOptions.hbs';\r\n\r\nrefs.filmList.addEventListener(\r\n  'click',\r\n  oneFilm.renderChoosenFilm.bind(oneFilm),\r\n);\r\n\r\nconst createSelectOptions = async () => {\r\n  const loadedFilms = await moviesApi.loadFilms();\r\n  const genres = loadedFilms\r\n    .reduce((all, film) => [...all, ...film.genres], [])\r\n    .map(genre => genre.toLowerCase())\r\n    .reduce(\r\n      (unique, item) => (unique.includes(item) ? unique : [...unique, item]),\r\n      [],\r\n    );\r\n\r\n  const markup = selectOptionsMarkup({ genres });\r\n  refs.select.insertAdjacentHTML('beforeend', markup);\r\n};\r\n\r\ncreateSelectOptions();\r\n\r\nconst filter = films => {\r\n  if (!refs.select.value) return films;\r\n  return films.filter(film =>\r\n    film.genres.map(genre => genre.toLowerCase()).includes(refs.select.value),\r\n  );\r\n};\r\n\r\nconst initFavoritesFromLS = films => {\r\n  const favoritesLS = localStorage.load('favorites');\r\n\r\n  if (favoritesLS) {\r\n    filmsData.favorites = favoritesLS;\r\n    films.map(film => {\r\n      const coincidence = favoritesLS.find(filmLS => filmLS.id === film.id);\r\n\r\n      if (coincidence) {\r\n        film.inFavorite = true;\r\n        return film;\r\n      }\r\n\r\n      film.inFavorite = false;\r\n      return film;\r\n    });\r\n  }\r\n};\r\n\r\nconst createFilmData = async () => {\r\n  const loadedFilms = await moviesApi.loadFilms();\r\n  const films = loadedFilms.map(film => ({ ...film, inFavorite: false }));\r\n\r\n  initFavoritesFromLS(films);\r\n\r\n  filmsData.allFilms = [...films];\r\n\r\n  return filmsData;\r\n};\r\n\r\nconst createMarkup = async () => {\r\n  const data = await createFilmData();\r\n  const allFilms = filter(data.allFilms);\r\n  const markup = filmListMarkup({ allFilms });\r\n\r\n  return markup;\r\n};\r\n\r\nconst renderFilmList = async () => {\r\n  const markup = await createMarkup();\r\n\r\n  refs.filmList.innerHTML = '';\r\n  refs.filmList.insertAdjacentHTML('beforeend', markup);\r\n  refs.list = document.querySelector('.js-movie-list');\r\n\r\n  refs.list.addEventListener('click', oneFilm.toggleFavorite.bind(oneFilm));\r\n};\r\n\r\nrenderFilmList();\r\n\r\nexport default renderFilmList;\r\n\r\nrefs.select.addEventListener('change', renderFilmList);\r\n","import localStorage from './utils/localStorage';\r\nimport refs from './refs';\r\n\r\n(() => {\r\n  const pageViewLS = localStorage.load('pageView');\r\n\r\n  if (pageViewLS === 'list') {\r\n    refs.main.classList.add('list');\r\n    refs.viewBlock.classList.remove('view-box--active');\r\n    refs.viewList.classList.add('view-box--active');\r\n  }\r\n})();\r\n\r\nconst toggleView = e => {\r\n  if (e.target.dataset.action === 'viewList') {\r\n    refs.main.classList.add('list');\r\n    refs.viewBlock.classList.remove('view-box--active');\r\n    refs.viewList.classList.add('view-box--active');\r\n\r\n    localStorage.save('pageView', 'list');\r\n    return;\r\n  }\r\n\r\n  refs.main.classList.remove('list');\r\n  refs.viewBlock.classList.add('view-box--active');\r\n  refs.viewList.classList.remove('view-box--active');\r\n  localStorage.save('pageView', 'block');\r\n};\r\n\r\nrefs.viewContainer.addEventListener('click', toggleView);\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                    <input type=\\\"checkbox\\\" name=\\\"favoriteInput\\\"  id='check\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"id\") : depth0), depth0))\n    + \"' class=\\\"oneFilm__checkbox\\\" data-action=\\\"favorite\\\" checked/>\\r\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                    <input type=\\\"checkbox\\\" name=\\\"favoriteInput\\\" id='check\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"id\") : depth0), depth0))\n    + \"' class=\\\"oneFilm__checkbox\\\" data-action=\\\"favorite\\\" />\\r\\n\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    return \"                    <li class=\\\"oneFilm__genres-element\\\">\"\n    + container.escapeExpression(container.lambda(depth0, depth0))\n    + \"</li>\\r\\n\";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    return \"              <span class=\\\"oneFilm__starring\\\">\"\n    + container.escapeExpression(container.lambda(depth0, depth0))\n    + \",</span>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, alias5=container.lambda, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\r\\n    <button class=\\\"closeBtn\\\"></button>\\r\\n    <h2 class=\\\"oneFilm__name\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":30},\"end\":{\"line\":3,\"column\":38}}}) : helper)))\n    + \"</h2>\\r\\n\\r\\n    <div class=\\\"oneFilm__description-container\\\">\\r\\n\\r\\n        <div class=\\\"oneFilm_img-container\\\">\\r\\n\\r\\n            <img src=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"img\") || (depth0 != null ? lookupProperty(depth0,\"img\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"img\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":21},\"end\":{\"line\":9,\"column\":28}}}) : helper)))\n    + \" alt=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":33},\"end\":{\"line\":9,\"column\":41}}}) : helper)))\n    + \" class=\\\"oneFilm__img\\\">\\r\\n            <div class=\\\"oneFilm__underPhoto\\\" id=\"\n    + alias4(alias5((depth0 != null ? lookupProperty(depth0,\"id\") : depth0), depth0))\n    + \">\\r\\n\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"inFavorite\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(3, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":16},\"end\":{\"line\":16,\"column\":23}}})) != null ? stack1 : \"\")\n    + \"\\r\\n                    <label for='check\"\n    + alias4(alias5((depth0 != null ? lookupProperty(depth0,\"id\") : depth0), depth0))\n    + \"' class=\\\"oneFilm__checkbox--label\\\"  data-action=\\\"favorite\\\"></label>\\r\\n\\r\\n                 <p class=\\\"oneFilm__year\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"year\") || (depth0 != null ? lookupProperty(depth0,\"year\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"year\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":42},\"end\":{\"line\":20,\"column\":50}}}) : helper)))\n    + \"</p>\\r\\n            </div>\\r\\n\\r\\n            <ul class=\\\"oneFilm__genres\\\">\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"genres\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":24,\"column\":16},\"end\":{\"line\":26,\"column\":25}}})) != null ? stack1 : \"\")\n    + \"            </ul>\\r\\n\\r\\n        </div>\\r\\n        \\r\\n        <div class=\\\"oneFilm__info\\\">\\r\\n          <p class=\\\"oneFilm__description\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"description\") || (depth0 != null ? lookupProperty(depth0,\"description\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"description\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":32,\"column\":42},\"end\":{\"line\":32,\"column\":57}}}) : helper)))\n    + \"</p>\\r\\n          <p class=\\\"oneFilm__director\\\">Director: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"director\") || (depth0 != null ? lookupProperty(depth0,\"director\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"director\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":33,\"column\":49},\"end\":{\"line\":33,\"column\":61}}}) : helper)))\n    + \"</p>\\r\\n          <p>\\r\\n              Starring:\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"starring\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":36,\"column\":14},\"end\":{\"line\":38,\"column\":23}}})) != null ? stack1 : \"\")\n    + \"          </p>\\r\\n        </div>\\r\\n        \\r\\n    </div>\\r\\n\\r\\n\";\n},\"useData\":true});"],"sourceRoot":""}