(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"7LLf":function(e,n,t){var r=t("mp5j");e.exports=(r.default||r).template({1:function(e,n,t,r,o){var a,i=e.lambda,l=e.escapeExpression,c=null!=n?n:e.nullContext||{},s=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"        <li id="+l(i(null!=n?s(n,"id"):n,n))+' class="movie-list__element">\r\n\r\n            <div class="img-container">\r\n\r\n            <img src='+l(i(null!=n?s(n,"img"):n,n))+' alt="movie poster" class="movie-list__element-img">\r\n            </div>\r\n           \r\n\r\n'+(null!=(a=s(t,"if").call(c,null!=n?s(n,"inFavorite"):n,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.program(4,o,0),data:o,loc:{start:{line:12,column:8},end:{line:16,column:15}}}))?a:"")+"\r\n            <label for='check"+l(i(null!=n?s(n,"id"):n,n))+'\' class="movie-list__element-favorite" data-action="favorite"></label>\r\n\r\n            <div class="movie-list__element-info">\r\n\r\n          \r\n                <h2 class="movie-list__element-name">'+l(i(null!=n?s(n,"name"):n,n))+'</h2>\r\n                <p class="movie-list__element-year">'+l(i(null!=n?s(n,"year"):n,n))+'</p>\r\n\r\n                  <div class="movie-list__element-description">'+l(i(null!=n?s(n,"description"):n,n))+'</div>\r\n\r\n                <div class="movie-list__element-genre">\r\n                    <ul class="genre-list">\r\n'+(null!=(a=s(t,"each").call(c,null!=n?s(n,"genres"):n,{name:"each",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:30,column:24},end:{line:32,column:33}}}))?a:"")+"                    </ul>\r\n                </div>\r\n\r\n              </div>\r\n        \r\n        </li>\r\n"},2:function(e,n,t,r,o){var a=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'            <input type="checkbox" name="favoriteInput"  id=\'check'+e.escapeExpression(e.lambda(null!=n?a(n,"id"):n,n))+'\' class="movie-list__element--checkbox" data-action="favorite" checked/>\r\n'},4:function(e,n,t,r,o){var a=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'            <input type="checkbox" name="favoriteInput" id=\'check'+e.escapeExpression(e.lambda(null!=n?a(n,"id"):n,n))+'\' class="movie-list__element--checkbox" data-action="favorite" />\r\n'},6:function(e,n,t,r,o){return'                        <li class="genre-elemetn">'+e.escapeExpression(e.lambda(n,n))+"</li>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,n,t,r,o){var a,i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'\r\n    <ul class="js-movie-list movie-list">\r\n'+(null!=(a=i(t,"each").call(null!=n?n:e.nullContext||{},null!=n?i(n,"allFilms"):n,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:8},end:{line:39,column:17}}}))?a:"")+"    </ul>\r\n"},useData:!0})},"C/5Y":function(e,n,t){var r=t("mp5j");e.exports=(r.default||r).template({1:function(e,n,t,r,o){var a=e.lambda,i=e.escapeExpression;return"<option value="+i(a(n,n))+">"+i(a(n,n))+"</option>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,n,t,r,o){var a,i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"\r\n"+(null!=(a=i(t,"each").call(null!=n?n:e.nullContext||{},null!=n?i(n,"genres"):n,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:0},end:{line:4,column:9}}}))?a:"")},useData:!0})},Cero:function(e,n,t){var r=t("mp5j");e.exports=(r.default||r).template({1:function(e,n,t,r,o){var a,i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return null!=(a=i(t,"each").call(null!=n?n:e.nullContext||{},null!=n?i(n,"favorites"):n,{name:"each",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:12},end:{line:10,column:21}}}))?a:""},2:function(e,n,t,r,o){var a=e.lambda,i=e.escapeExpression,l=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"            <li id="+i(a(null!=n?l(n,"id"):n,n))+' class="favorites-list__element">\r\n                <p class="favorites-list__element--name">'+i(a(null!=n?l(n,"name"):n,n))+'</p>\r\n                <button data-action="delete" class="deleteBtn"></button>\r\n            </li>\r\n'},4:function(e,n,t,r,o){return'            <li class="favorites__noMovie">You don`t have any favorites movie</li>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,n,t,r,o){var a,i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'\r\n    <h2 class="favorites-h2">Favorites</h2>\r\n    <ul class="favorites-list">\r\n'+(null!=(a=i(t,"if").call(null!=n?n:e.nullContext||{},null!=(a=null!=n?i(n,"favorites"):n)?i(a,"length"):a,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(4,o,0),data:o,loc:{start:{line:4,column:8},end:{line:13,column:15}}}))?a:"")+"    </ul>\r\n"},useData:!0})},K51s:function(e,n,t){},OPH6:function(e,n,t){},QfWi:function(e,n,t){"use strict";t.r(n);t("OPH6"),t("K51s"),t("hi3g"),t("lYjL"),t("IlJM"),t("IvQZ"),t("lmye"),t("x3Br"),t("wCa+"),t("JBxO"),t("FdtR"),t("4NM0"),t("wcNg");var r=t("czhI"),o=t.n(r);function a(e,n,t,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void t(e)}l.done?n(c):Promise.resolve(c).then(r,o)}function i(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function l(e){a(i,r,o,l,c,"next",e)}function c(e){a(i,r,o,l,c,"throw",e)}l(void 0)}))}}var l,c,s={BASE_URL:"https://my-json-server.typicode.com/moviedb-tech/movies/list",loadFilms:(c=i(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.get(this.BASE_URL);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return c.apply(this,arguments)}),loadOneFilm:(l=i(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.get(this.BASE_URL+"/"+n);case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return l.apply(this,arguments)})},u=t("7LLf"),m=t.n(u),d={main:document.querySelector("#main"),filmList:document.querySelector(".film-list"),favorites:document.querySelector(".favorites"),oneFilmModal:document.querySelector(".oneFilm"),body:document.body,preloader:document.querySelector(".preloader"),select:document.querySelector("#genreSelect"),viewContainer:document.querySelector(".view-container"),viewBlock:document.querySelector(".js-viewBlock"),viewList:document.querySelector(".js-viewList"),favToggle:document.querySelector(".favorites__toggle")},v=t("oh1+"),p=t.n(v),f={allFilms:[],favorites:[]},h=function(e){try{var n=localStorage.getItem(e);return null===n?void 0:JSON.parse(n)}catch(e){console.error("Get state error: ",e)}},g=function(e,n){try{var t=JSON.stringify(n);localStorage.setItem(e,t)}catch(e){console.error("Set state error: ",e)}},y=t("Cero"),w=t.n(y);d.favorites.addEventListener("click",(function(e){"delete"!==e.target.dataset.action&&E.renderChoosenFilm(e)})),d.favorites.addEventListener("click",(function(e){"delete"===e.target.dataset.action&&E.deleteFromFavorite(e)})),d.favToggle.addEventListener("click",(function(){d.favorites.classList.toggle("favorites--show"),d.favToggle.classList.toggle("favorites__toggle--show")}));var b,_=function(){var e=w()(f);d.favorites.innerHTML="",d.favorites.insertAdjacentHTML("beforeend",e)};(b=h("favorites"))&&(f.favorites=b),_();var k=_;function x(e,n,t,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void t(e)}l.done?n(c):Promise.resolve(c).then(r,o)}function F(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){x(a,r,o,i,l,"next",e)}function l(e){x(a,r,o,i,l,"throw",e)}i(void 0)}))}}var L,O,P,E={element:"",createMarkup:(P=F(regeneratorRuntime.mark((function e(n){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.loadOneFilm(n);case 2:return t=e.sent,f.favorites.find((function(e){return e.id===t.id}))&&(t.inFavorite=!0),r=p()(t),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)}))),function(e){return P.apply(this,arguments)}),render:(O=F(regeneratorRuntime.mark((function e(n,t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.createMarkup(t);case 2:r=e.sent,n.innerHTML="",n.insertAdjacentHTML("beforeend",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e,n){return O.apply(this,arguments)}),renderChoosenFilm:(L=F(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.target!==n.currentTarget){e.next=2;break}return e.abrupt("return");case 2:if(!(t=n.target.closest("li"))){e.next=13;break}return window.scrollTo(0,0),d.preloader.classList.remove("preloader--none"),d.body.classList.add("hideOverflow"),this.element=t,e.next=10,this.render(d.oneFilmModal,t.id);case 10:d.oneFilmModal.classList.remove("oneFilm--none"),d.preloader.classList.add("preloader--none"),this.addEventListenersForOneFilm();case 13:case"end":return e.stop()}}),e,this)}))),function(e){return L.apply(this,arguments)}),addEventListenersForOneFilm:function(){var e=document.querySelector(".closeBtn"),n=document.querySelector(".oneFilm__checkbox--label");e.addEventListener("click",this.closeOnButton.bind(this)),window.addEventListener("keydown",this.closeOnEsc.bind(this)),n.addEventListener("click",this.toggleFavorite.bind(this))},close:function(){d.oneFilmModal.classList.add("oneFilm--none"),d.body.classList.remove("hideOverflow"),window.removeEventListener("keydown",this.closeOnEsc),this.element.scrollIntoView({block:"center"})},closeOnButton:function(e){e.stopPropagation(),this.close()},closeOnEsc:function(e){"Escape"===e.code&&this.close()},toggleFavorite:function(e){"favorite"===e.target.dataset.action&&e.stopPropagation(),"LABEL"===e.target.tagName&&(e.target.control.checked?this.deleteFromFavorite(e):this.addToFavorite(e))},addToFavorite:function(e){var n=e.target.closest("li")||e.target.closest("div"),t=f.allFilms.find((function(e){var t=e.id;return String(t)===n.id}));f.favorites=[].concat(f.favorites,[t]),g("favorites",f.favorites),k(),I()},deleteFromFavorite:function(e){var n=e.target.closest("li")||e.target.closest("div");f.favorites=f.favorites.filter((function(e){var t=e.id;return String(t)!==n.id})),g("favorites",f.favorites),k(),I()}},j=t("C/5Y"),S=t.n(j);function R(e,n,t,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void t(e)}l.done?n(c):Promise.resolve(c).then(r,o)}function C(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){R(a,r,o,i,l,"next",e)}function l(e){R(a,r,o,i,l,"throw",e)}i(void 0)}))}}d.filmList.addEventListener("click",E.renderChoosenFilm.bind(E)),function(){var e=C(regeneratorRuntime.mark((function e(){var n,t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.loadFilms();case 2:n=e.sent,t=n.reduce((function(e,n){return[].concat(e,n.genres)}),[]).map((function(e){return e.toLowerCase()})).reduce((function(e,n){return e.includes(n)?e:[].concat(e,[n])}),[]),r=S()({genres:t}),d.select.insertAdjacentHTML("beforeend",r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();var M=function(e){var n=h("favorites");n&&(f.favorites=n,e.map((function(e){return n.find((function(n){return n.id===e.id}))?(e.inFavorite=!0,e):(e.inFavorite=!1,e)})))},B=function(){var e=C(regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.loadFilms();case 2:return n=e.sent,t=n.map((function(e){return Object.assign({},e,{inFavorite:!1})})),M(t),f.allFilms=[].concat(t),e.abrupt("return",f);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=C(regeneratorRuntime.mark((function e(){var n,t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:return n=e.sent,o=n.allFilms,t=d.select.value?o.filter((function(e){return e.genres.map((function(e){return e.toLowerCase()})).includes(d.select.value)})):o,r=m()({allFilms:t}),e.abrupt("return",r);case 6:case"end":return e.stop()}var o}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=C(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:n=e.sent,d.filmList.innerHTML="",d.filmList.insertAdjacentHTML("beforeend",n),d.list=document.querySelector(".js-movie-list"),d.list.addEventListener("click",E.toggleFavorite.bind(E));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();q();var I=q;d.select.addEventListener("change",q),"list"===h("pageView")&&(d.main.classList.add("list"),d.viewBlock.classList.remove("view-box--active"),d.viewList.classList.add("view-box--active"));d.viewContainer.addEventListener("click",(function(e){if("viewList"===e.target.dataset.action)return d.main.classList.add("list"),d.viewBlock.classList.remove("view-box--active"),d.viewList.classList.add("view-box--active"),void g("pageView","list");d.main.classList.remove("list"),d.viewBlock.classList.add("view-box--active"),d.viewList.classList.remove("view-box--active"),g("pageView","block")}))},"oh1+":function(e,n,t){var r=t("mp5j");e.exports=(r.default||r).template({1:function(e,n,t,r,o){var a=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'                    <input type="checkbox" name="favoriteInput"  id=\'check'+e.escapeExpression(e.lambda(null!=n?a(n,"id"):n,n))+'\' class="oneFilm__checkbox" data-action="favorite" checked/>\r\n'},3:function(e,n,t,r,o){var a=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'                    <input type="checkbox" name="favoriteInput" id=\'check'+e.escapeExpression(e.lambda(null!=n?a(n,"id"):n,n))+'\' class="oneFilm__checkbox" data-action="favorite" />\r\n'},5:function(e,n,t,r,o){return'                    <li class="oneFilm__genres-element">'+e.escapeExpression(e.lambda(n,n))+"</li>\r\n"},7:function(e,n,t,r,o){return'              <span class="oneFilm__starring">'+e.escapeExpression(e.lambda(n,n))+",</span>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,n,t,r,o){var a,i,l=null!=n?n:e.nullContext||{},c=e.hooks.helperMissing,s="function",u=e.escapeExpression,m=e.lambda,d=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'\r\n    <button class="closeBtn"></button>\r\n    <h2 class="oneFilm__name">'+u(typeof(i=null!=(i=d(t,"name")||(null!=n?d(n,"name"):n))?i:c)===s?i.call(l,{name:"name",hash:{},data:o,loc:{start:{line:3,column:30},end:{line:3,column:38}}}):i)+'</h2>\r\n\r\n    <div class="oneFilm__description-container">\r\n\r\n        <div class="oneFilm_img-container">\r\n\r\n            <img src='+u(typeof(i=null!=(i=d(t,"img")||(null!=n?d(n,"img"):n))?i:c)===s?i.call(l,{name:"img",hash:{},data:o,loc:{start:{line:9,column:21},end:{line:9,column:28}}}):i)+" alt="+u(typeof(i=null!=(i=d(t,"name")||(null!=n?d(n,"name"):n))?i:c)===s?i.call(l,{name:"name",hash:{},data:o,loc:{start:{line:9,column:33},end:{line:9,column:41}}}):i)+' class="oneFilm__img">\r\n            <div class="oneFilm__underPhoto" id='+u(m(null!=n?d(n,"id"):n,n))+">\r\n\r\n"+(null!=(a=d(t,"if").call(l,null!=n?d(n,"inFavorite"):n,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:12,column:16},end:{line:16,column:23}}}))?a:"")+"\r\n                    <label for='check"+u(m(null!=n?d(n,"id"):n,n))+'\' class="oneFilm__checkbox--label"  data-action="favorite"></label>\r\n\r\n                 <p class="oneFilm__year">'+u(typeof(i=null!=(i=d(t,"year")||(null!=n?d(n,"year"):n))?i:c)===s?i.call(l,{name:"year",hash:{},data:o,loc:{start:{line:20,column:42},end:{line:20,column:50}}}):i)+'</p>\r\n            </div>\r\n\r\n            <ul class="oneFilm__genres">\r\n'+(null!=(a=d(t,"each").call(l,null!=n?d(n,"genres"):n,{name:"each",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:24,column:16},end:{line:26,column:25}}}))?a:"")+'            </ul>\r\n\r\n        </div>\r\n        \r\n        <div class="oneFilm__info">\r\n          <p class="oneFilm__description">'+u(typeof(i=null!=(i=d(t,"description")||(null!=n?d(n,"description"):n))?i:c)===s?i.call(l,{name:"description",hash:{},data:o,loc:{start:{line:32,column:42},end:{line:32,column:57}}}):i)+'</p>\r\n          <p class="oneFilm__director">Director: '+u(typeof(i=null!=(i=d(t,"director")||(null!=n?d(n,"director"):n))?i:c)===s?i.call(l,{name:"director",hash:{},data:o,loc:{start:{line:33,column:49},end:{line:33,column:61}}}):i)+"</p>\r\n          <p>\r\n              Starring:\r\n"+(null!=(a=d(t,"each").call(l,null!=n?d(n,"starring"):n,{name:"each",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:36,column:14},end:{line:38,column:23}}}))?a:"")+"          </p>\r\n        </div>\r\n        \r\n    </div>\r\n\r\n"},useData:!0})}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.5776be6dcf232baeaad1.js.map